((t,e)=>{"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified("knockout")?define(["jquery","knockout"],e):e(t.jQuery,t.ko)})(this,function(u,d){function o(t,e){this.$select=u(t),this.options=this.mergeOptions(u.extend({},e,this.$select.data())),this.$select.attr("data-placeholder")&&(this.options.nonSelectedText=this.$select.data("placeholder")),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=u.proxy(this.options.onChange,this),this.options.onSelectAll=u.proxy(this.options.onSelectAll,this),this.options.onDeselectAll=u.proxy(this.options.onDeselectAll,this),this.options.onDropdownShow=u.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=u.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=u.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=u.proxy(this.options.onDropdownHidden,this),this.options.onInitialized=u.proxy(this.options.onInitialized,this),this.options.onFiltering=u.proxy(this.options.onFiltering,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildReset(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.wasDisabled=this.$select.prop("disabled"),this.options.disableIfEmpty&&u("option",this.$select).length<=0&&this.disable(),this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container),this.$select.prop("tabindex","-1"),"never"!==this.options.widthSynchronizationMode&&this.synchronizeButtonAndPopupWidth(),this.options.onInitialized(this.$select,this.$container)}void 0!==d&&d.bindingHandlers&&!d.bindingHandlers.multiselect&&(d.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(t,e,i,s,o){function l(t){setTimeout(function(){t?r.multiselect("enable"):r.multiselect("disable")})}var n,p,a,c,h,r=u(t),e=d.toJS(e());r.multiselect(e),i.has("options")&&(n=i.get("options"),d.isObservable(n))&&d.computed({read:function(){n(),setTimeout(function(){var t=r.data("multiselect");t&&t.updateOriginalOptions(),r.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:t}),i.has("value")&&(p=i.get("value"),d.isObservable(p))&&d.computed({read:function(){p(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0}),i.has("selectedOptions")&&(a=i.get("selectedOptions"),d.isObservable(a))&&d.computed({read:function(){a(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0});i.has("enable")&&(c=i.get("enable"),d.isObservable(c)?d.computed({read:function(){l(c())},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0}):l(c)),i.has("disable")&&(h=i.get("disable"),d.isObservable(h)?d.computed({read:function(){l(!h())},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0}):l(!h)),d.utils.domNodeDisposal.addDisposeCallback(t,function(){r.multiselect("destroy")})},update:function(t,e,i,s,o){t=u(t),e=d.toJS(e());t.multiselect("setOptions",e),t.multiselect("rebuild")}}),o.prototype={defaults:{buttonText:function(t,e){var i,s;return 0<this.disabledText.length&&e.prop("disabled")?this.disabledText:0===t.length?this.nonSelectedText:this.allSelectedText&&t.length===u("option",u(e)).length&&1!==u("option",u(e)).length&&this.multiple?this.selectAllNumber?this.allSelectedText+" ("+t.length+")":this.allSelectedText:0!=this.numberDisplayed&&t.length>this.numberDisplayed?t.length+" "+this.nSelectedText:(i="",s=this.delimiterText,t.each(function(){var t=void 0!==u(this).attr("label")?u(this).attr("label"):u(this).text();i+=t+s}),i.substr(0,i.length-this.delimiterText.length))},buttonTitle:function(t,e){var i,s;return 0===t.length?this.nonSelectedText:(i="",s=this.delimiterText,t.each(function(){var t=void 0!==u(this).attr("label")?u(this).attr("label"):u(this).text();i+=t+s}),i.substr(0,i.length-this.delimiterText.length))},checkboxName:function(t){return!1},optionLabel:function(t){return u(t).attr("label")||u(t).text()},optionClass:function(t){return u(t).attr("class")||""},onChange:function(t,e){},onDropdownShow:function(t){},onDropdownHide:function(t){},onDropdownShown:function(t){},onDropdownHidden:function(t){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(t,e){},onFiltering:function(t){},enableHTML:!1,buttonClass:"form-select",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:"active",maxHeight:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableFullValueFiltering:!1,enableClickableOptGroups:!1,enableCollapsibleOptGroups:!1,collapseOptGroupsByDefault:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,disabledText:"",delimiterText:", ",includeResetOption:!1,includeResetDivider:!1,resetText:"Reset",indentGroupOptions:!0,widthSynchronizationMode:"never",buttonTextAlignment:"center",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-bs-toggle="dropdown"><span class="multiselect-selected-text"></span></button>',popupContainer:'<div class="multiselect-container dropdown-menu"></div>',filter:'<div class="multiselect-filter d-flex align-items-center"><i class="fas fa-sm fa-search text-muted"></i><input type="search" class="multiselect-search form-control" /></div>',option:'<button type="button" class="multiselect-option dropdown-item"></button>',divider:'<div class="dropdown-divider"></div>',optionGroup:'<button type="button" class="multiselect-group dropdown-item"></button>',resetButton:'<div class="multiselect-reset text-center p-2"><button type="button" class="btn btn-sm btn-block btn-outline-secondary"></button></div>'}},constructor:o,buildContainer:function(){this.$container=u(this.options.buttonContainer),"never"!==this.options.widthSynchronizationMode?this.$container.on("show.bs.dropdown",u.proxy(function(){this.synchronizeButtonAndPopupWidth(),this.options.onDropdownShow()},this)):this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){if(this.$button=u(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:"100%"}),this.$container.css({width:this.options.buttonWidth})),this.options.buttonTextAlignment)switch(this.options.buttonTextAlignment){case"left":this.$button.addClass("text-left");break;case"center":this.$button.addClass("text-center");break;case"right":this.$button.addClass("text-right")}var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t),this.$container.prepend(this.$button)},buildDropdown:function(){this.$popupContainer=u(this.options.templates.popupContainer),this.options.dropRight?this.$container.addClass("dropright"):this.options.dropUp&&this.$container.addClass("dropup"),this.options.maxHeight&&this.$popupContainer.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),"never"!==this.options.widthSynchronizationMode&&this.$popupContainer.css("overflow-x","hidden"),this.$popupContainer.on("touchstart click",function(t){t.stopPropagation()}),this.$container.append(this.$popupContainer)},synchronizeButtonAndPopupWidth:function(){if(this.$popupContainer&&"never"!==this.options.widthSynchronizationMode){var t=this.$button.outerWidth();switch(this.options.widthSynchronizationMode){case"always":this.$popupContainer.css("min-width",t),this.$popupContainer.css("max-width",t);break;case"ifPopupIsSmaller":this.$popupContainer.css("min-width",t);break;case"ifPopupIsWider":this.$popupContainer.css("max-width",t)}}},buildDropdownOptions:function(){this.$select.children().each(u.proxy(function(t,e){var i=u(e),s=i.prop("tagName").toLowerCase();i.prop("value")!==this.options.selectAllValue&&("optgroup"===s?this.createOptgroup(e):"option"===s&&("divider"===i.data("role")?this.createDivider():this.createOptionValue(e,!1)))},this)),u(this.$popupContainer).off("change",'> *:not(.multiselect-group) input[type="checkbox"], > *:not(.multiselect-group) input[type="radio"]'),u(this.$popupContainer).on("change",'> *:not(.multiselect-group) input[type="checkbox"], > *:not(.multiselect-group) input[type="radio"]',u.proxy(function(t){var t=u(t.target),e=t.prop("checked")||!1,i=t.val()===this.options.selectAllValue,s=(this.options.selectedClass&&(e?t.closest(".multiselect-option").addClass(this.options.selectedClass):t.closest(".multiselect-option").removeClass(this.options.selectedClass)),t.val()),s=this.getOptionByValue(s),o=u("option",this.$select).not(s),t=u("input",this.$container).not(t);if(i?e?this.selectAll(this.options.selectAllJustVisible,!0):this.deselectAll(this.options.selectAllJustVisible,!0):(e?(s.prop("selected",!0),this.options.multiple?s.prop("selected",!0):(this.options.selectedClass&&u(t).closest(".dropdown-item").removeClass(this.options.selectedClass),u(t).prop("checked",!1),o.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&o.closest(".dropdown-item").css("outline","")):s.prop("selected",!1),this.options.onChange(s,e),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()),this.$select.change(),this.updateButtonText(),this.options.preventInputChangeEvent)return!1},this)),u(".multiselect-option",this.$popupContainer).off("mousedown"),u(".multiselect-option",this.$popupContainer).on("mousedown",function(t){if(t.shiftKey)return!1}),u(this.$popupContainer).off("touchstart click",".multiselect-option, .multiselect-all, .multiselect-group"),u(this.$popupContainer).on("touchstart click",".multiselect-option, .multiselect-all, .multiselect-group",u.proxy(function(t){t.stopPropagation();var e=u(t.target);if(t.shiftKey&&this.options.multiple){e.is("input")||(t.preventDefault(),(e=e.closest(".multiselect-option").find("input")).prop("checked",!e.prop("checked")));var i=e.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==e){var s,o=this.$popupContainer.find(".multiselect-option:visible").index(e.closest(".multiselect-option")),l=this.$popupContainer.find(".multiselect-option:visible").index(this.lastToggledInput.closest(".multiselect-option")),n=(l<o&&(s=l,l=o,o=s),++l,this.$popupContainer.find(".multiselect-option:not(.multiselect-filter-hidden)").slice(o,l).find("input"));n.prop("checked",i),this.options.selectedClass&&n.closest(".multiselect-option").toggleClass(this.options.selectedClass,i);for(var p=0,a=n.length;p<a;p++){var c=u(n[p]);this.getOptionByValue(c.val()).prop("selected",i)}}e.trigger("change")}else e.is("input")||(0<(c=e.closest(".multiselect-option, .multiselect-all").find(".form-check-input")).length?!this.options.multiple&&c.prop("checked")||(c.prop("checked",!c.prop("checked")),c.change()):this.options.enableClickableOptGroups&&this.options.multiple&&!e.hasClass("caret-container")&&0<(c=(s=(s=e).hasClass("multiselect-group")?s:e.closest(".multiselect-group")).find(".form-check-input")).length&&(c.prop("checked",!c.prop("checked")),c.change()),t.preventDefault());0<e.closest(".multiselect-option").find("input[type='checkbox'], input[type='radio']").length?this.lastToggledInput=e:this.lastToggledInput=null,e.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",u.proxy(function(t){var e,i,s;u("input.multiselect-search",this.$container).is(":focus")||(9===t.keyCode&&this.$container.hasClass("show")?this.$button.click():(s=u(this.$container).find(".multiselect-option:not(.disabled), .multiselect-group:not(.disabled), .multiselect-all").filter(":visible")).length&&(e=s.index(s.filter(":focus")),i=s.eq(e),32===t.keyCode&&((s=i.find("input")).prop("checked",!s.prop("checked")),s.change(),t.preventDefault()),13===t.keyCode)&&setTimeout(function(){i.focus()},0))},this)),this.options.enableClickableOptGroups&&this.options.multiple&&(u(".multiselect-group input",this.$popupContainer).off("change"),u(".multiselect-group input",this.$popupContainer).on("change",u.proxy(function(t){t.stopPropagation();var o=u(t.target).prop("checked")||!1,t=u(t.target).closest(".dropdown-item"),e=t.nextUntil(".multiselect-group").not(".multiselect-filter-hidden").not(".disabled").find("input"),l=[];this.options.selectedClass&&(o?t.addClass(this.options.selectedClass):t.removeClass(this.options.selectedClass)),u.each(e,u.proxy(function(t,e){var e=u(e),i=e.val(),s=this.getOptionByValue(i);o?(e.prop("checked",!0),e.closest(".dropdown-item").addClass(this.options.selectedClass),s.prop("selected",!0)):(e.prop("checked",!1),e.closest(".dropdown-item").removeClass(this.options.selectedClass),s.prop("selected",!1)),l.push(this.getOptionByValue(i))},this)),this.options.onChange(l,o),this.$select.change(),this.updateButtonText(),this.updateSelectAll()},this))),this.options.enableCollapsibleOptGroups&&this.options.multiple&&(u(".multiselect-group .caret-container",this.$popupContainer).off("click"),u(".multiselect-group .caret-container",this.$popupContainer).on("click",u.proxy(function(t){var t=u(t.target).closest(".multiselect-group").nextUntil(".multiselect-group").not(".multiselect-filter-hidden"),e=!0;t.each(function(){e=e&&!u(this).hasClass("multiselect-collapsible-hidden")}),e?t.hide().addClass("multiselect-collapsible-hidden"):t.show().removeClass("multiselect-collapsible-hidden")},this)))},createCheckbox:function(t,e,i,s,o,l){var n=u("<span />"),p=(n.addClass("form-check"),this.options.enableHTML&&0<u(e).length?(p=u('<label class="form-check-label" />')).html(e):(p=u('<label class="form-check-label" />')).text(e),n.append(p),u('<input class="form-check-input"/>').attr("type",l));return p.val(s),n.prepend(p),i&&p.attr("name",i),t.prepend(n),t.attr("title",o||e),p},createOptionValue:function(t,e){var i=u(t),s=(i.is(":selected")&&i.prop("selected",!0),this.options.optionLabel(t)),o=this.options.optionClass(t),l=i.val(),n=this.options.multiple?"checkbox":"radio",p=i.attr("title"),a=u(this.options.templates.option),o=(a.addClass(o),e&&this.options.indentGroupOptions&&a.addClass("multiselect-group-option-indented"),this.options.collapseOptGroupsByDefault&&"optgroup"===u(t).parent().prop("tagName").toLowerCase()&&(a.addClass("multiselect-collapsible-hidden"),a.hide()),this.options.checkboxName(i)),e=this.createCheckbox(a,s,o,l,p,n),t=i.prop("selected")||!1;l===this.options.selectAllValue&&(a.addClass("multiselect-all"),a.removeClass("multiselect-option"),e.parent().parent().addClass("multiselect-all")),this.$popupContainer.append(a),i.is(":disabled")&&e.attr("disabled","disabled").prop("disabled",!0).closest(".dropdown-item").addClass("disabled"),e.prop("checked",t),t&&this.options.selectedClass&&e.closest(".dropdown-item").addClass(this.options.selectedClass)},createDivider:function(t){var e=u(this.options.templates.divider);this.$popupContainer.append(e)},createOptgroup:function(t){var e=u(t),i=e.attr("label"),s=e.attr("value"),o=e.attr("title"),l=u("<span class='multiselect-group dropdown-item-text'></span>"),s=(this.options.enableClickableOptGroups&&this.options.multiple?(l=u(this.options.templates.optionGroup),this.createCheckbox(l,i,null,s,o,"checkbox")):this.options.enableHTML?l.html(" "+i):l.text(" "+i),this.options.optionClass(t));l.addClass(s),this.options.enableCollapsibleOptGroups&&this.options.multiple&&(l.find(".form-check").addClass("d-inline-block"),l.append('<span class="caret-container dropdown-toggle pl-1"></span>')),e.is(":disabled")&&l.addClass("disabled"),this.$popupContainer.append(l),u("option",t).each(u.proxy(function(t,e){this.createOptionValue(e,!0)},this))},buildReset:function(){var t;this.options.includeResetOption&&(this.options.includeResetDivider&&((t=u(this.options.templates.divider)).addClass("mt-0"),this.$popupContainer.prepend(t)),t=u(this.options.templates.resetButton),this.options.enableHTML?u("button",t).html(this.options.resetText):u("button",t).text(this.options.resetText),u("button",t).click(u.proxy(function(){this.clearSelection()},this)),this.$popupContainer.prepend(t))},buildSelectAll:function(){var t,e;"number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&u("option",this.$select).length>this.options.includeSelectAllIfMoreThan&&(this.options.includeSelectAllDivider&&this.$popupContainer.prepend(u(this.options.templates.divider)),t=u(this.options.templates.li||this.options.templates.option),e=this.createCheckbox(t,this.options.selectAllText,this.options.selectAllName,this.options.selectAllValue,this.options.selectAllText,"checkbox"),t.addClass("multiselect-all"),t.removeClass("multiselect-option"),t.find(".form-check-label").addClass("font-weight-bold"),this.$popupContainer.prepend(t),e.prop("checked",!1))},buildFilter:function(){var t;(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering)&&(t=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering),this.$select.find("option").length>=t)&&(this.$filter=u(this.options.templates.filter),u("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn?(this.isFirefox()&&0===this.$filter.find(".multiselect-clear-filter").length&&this.$filter.append("<i class='fas fa-times text-muted multiselect-clear-filter multiselect-moz-clear-filter'></i>"),this.$filter.find(".multiselect-clear-filter").on("click",u.proxy(function(t){clearTimeout(this.searchTimeout),this.query="",this.$filter.find(".multiselect-search").val(""),u(".dropdown-item",this.$popupContainer).show().removeClass("multiselect-filter-hidden"),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},this))):(this.$filter.find(".multiselect-search").attr("type","text"),this.$filter.find(".multiselect-clear-filter").remove()),this.$popupContainer.prepend(this.$filter),this.$filter.val(this.query).on("click",function(t){t.stopPropagation()}).on("input keydown",u.proxy(function(t){13===t.which&&t.preventDefault(),this.isFirefox()&&this.options.includeFilterClearBtn&&(t.target.value?this.$filter.find(".multiselect-moz-clear-filter").show():this.$filter.find(".multiselect-moz-clear-filter").hide()),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(u.proxy(function(){var l,n;this.query!==t.target.value&&(this.query=t.target.value,u.each(u(".multiselect-option, .multiselect-group",this.$popupContainer),u.proxy(function(t,e){var i=0<u("input",e).length?u("input",e).val():"",s=u(".form-check-label",e).text(),o="";"text"===this.options.filterBehavior?o=s:"value"===this.options.filterBehavior?o=i:"both"===this.options.filterBehavior&&(o=s+"\n"+i),i!==this.options.selectAllValue&&s&&(i=!1,this.options.enableCaseInsensitiveFiltering&&(o=o.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&"both"!==this.options.filterBehavior?(s=o.trim().substring(0,this.query.length),-1<this.query.indexOf(s)&&(i=!0)):-1<o.indexOf(this.query)&&(i=!0),i||(u(e).css("display","none"),u(e).addClass("multiselect-filter-hidden")),i&&(u(e).css("display","block"),u(e).removeClass("multiselect-filter-hidden")),u(e).hasClass("multiselect-group")?(l=e,n=i):(i&&u(l).show().removeClass("multiselect-filter-hidden"),!i&&n&&u(e).show().removeClass("multiselect-filter-hidden")))},this))),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.onFiltering(t.target)},this),300,this)},this)))},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.prop("disabled",this.options.wasDisabled),this.$select.data("multiselect",null)},refresh:function(){var s={};u(".multiselect-option input",this.$popupContainer).each(function(){s[u(this).val()]=u(this)}),u("option",this.$select).each(u.proxy(function(t,e){var i=u(e),e=s[u(e).val()];i.is(":selected")?(e.prop("checked",!0),this.options.selectedClass&&e.closest(".multiselect-option").addClass(this.options.selectedClass)):(e.prop("checked",!1),this.options.selectedClass&&e.closest(".multiselect-option").removeClass(this.options.selectedClass)),i.is(":disabled")?e.attr("disabled","disabled").prop("disabled",!0).closest(".multiselect-option").addClass("disabled"):e.prop("disabled",!1).closest(".multiselect-option").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(t,e){u.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s,o=t[i];null!=o&&(s=this.getOptionByValue(o),o=this.getInputByValue(o),void 0!==s&&void 0!==o&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&o.closest(".dropdown-item").addClass(this.options.selectedClass),o.prop("checked",!0),s.prop("selected",!0),e))&&this.options.onChange(s,!0)}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(t,e){u.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s,o=t[i];null!=o&&(s=this.getOptionByValue(o),o=this.getInputByValue(o),void 0!==s&&void 0!==o&&(this.options.selectedClass&&o.closest(".dropdown-item").removeClass(this.options.selectedClass),o.prop("checked",!1),s.prop("selected",!1),e))&&this.options.onChange(s,!1)}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},selectAll:function(t,e){(t=void 0===t||t)?(t=u(".multiselect-option:not(.disabled):not(.multiselect-filter-hidden)",this.$popupContainer),u("input:enabled",t).prop("checked",!0),t.addClass(this.options.selectedClass),u("input:enabled",t).each(u.proxy(function(t,e){e=u(e).val(),e=this.getOptionByValue(e);u(e).prop("selected",!0)},this))):(t=u(".multiselect-option:not(.disabled)",this.$popupContainer),u("input:enabled",t).prop("checked",!0),t.addClass(this.options.selectedClass),u("input:enabled",t).each(u.proxy(function(t,e){e=u(e).val(),e=this.getOptionByValue(e);u(e).prop("selected",!0)},this))),u('.multiselect-option input[value="'+this.options.selectAllValue+'"]',this.$popupContainer).prop("checked",!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.updateButtonText(),this.updateSelectAll(),e&&this.options.onSelectAll()},deselectAll:function(t,e){(t=void 0===t||t)?(t=u(".multiselect-option:not(.disabled):not(.multiselect-filter-hidden)",this.$popupContainer),u('input[type="checkbox"]:enabled',t).prop("checked",!1),t.removeClass(this.options.selectedClass),u('input[type="checkbox"]:enabled',t).each(u.proxy(function(t,e){e=u(e).val(),e=this.getOptionByValue(e);u(e).prop("selected",!1)},this))):(t=u(".multiselect-option:not(.disabled):not(.multiselect-group)",this.$popupContainer),u('input[type="checkbox"]:enabled',t).prop("checked",!1),t.removeClass(this.options.selectedClass),u('input[type="checkbox"]:enabled',t).each(u.proxy(function(t,e){e=u(e).val(),e=this.getOptionByValue(e);u(e).prop("selected",!1)},this))),u('.multiselect-all input[value="'+this.options.selectAllValue+'"]',this.$popupContainer).prop("checked",!1),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.updateButtonText(),this.updateSelectAll(),e&&this.options.onDeselectAll()},rebuild:function(){this.$popupContainer.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.disableIfEmpty&&u("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight?this.$container.addClass("dropright"):this.options.dropUp&&this.$container.addClass("dropup"),"never"!==this.options.widthSynchronizationMode&&this.synchronizeButtonAndPopupWidth()},dataprovider:function(t){var a=0,c=this.$select.empty();u.each(t,function(t,e){if(u.isArray(e.children)){a++;for(var s=u("<optgroup/>").attr({label:e.label||"Group "+a,disabled:!!e.disabled,value:e.value}),i=e.children,o=function(t){var e,i={value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled};for(e in t.attributes)i["data-"+e]=t.attributes[e];s.append(u("<option/>").attr(i))},l=0;l<i.length;++l)o(i[l],l)}else{var n,p={value:e.value,label:e.label||e.value,title:e.title,class:e.class,selected:!!e.selected,disabled:!!e.disabled};for(n in e.attributes)p["data-"+n]=e.attributes[n];(s=u("<option/>").attr(p)).text(e.label||e.value)}c.append(s)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled"),this.updateButtonText()},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled"),this.updateButtonText()},setOptions:function(t){this.options=this.mergeOptions(t)},mergeOptions:function(t){return u.extend(!0,{},this.defaults,this.options,t)},hasSelectAll:function(){return 0<u(".multiselect-all",this.$popupContainer).length},updateOptGroups:function(){var t=u(".multiselect-group",this.$popupContainer),i=this.options.selectedClass;t.each(function(){var t=u(this).nextUntil(".multiselect-group").not(".multiselect-filter-hidden").not(".disabled"),e=!0;t.each(function(){u("input",this).prop("checked")||(e=!1)}),i&&(e?u(this).addClass(i):u(this).removeClass(i)),u("input",this).prop("checked",e)})},updateSelectAll:function(t){var e,i,s,o;this.hasSelectAll()&&(e=(i=u(".multiselect-option:not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$popupContainer)).length,i=i.filter(":checked").length,o=(s=u(".multiselect-all",this.$popupContainer)).find("input"),0<i&&i===e?(o.prop("checked",!0),s.addClass(this.options.selectedClass)):(o.prop("checked",!1),s.removeClass(this.options.selectedClass)))},updateButtonText:function(){var t=this.getSelected();this.options.enableHTML?u(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(t,this.$select)):u(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(t,this.$select)),u(".multiselect",this.$container).attr("title",this.options.buttonTitle(t,this.$select)),this.$button.trigger("change")},getSelected:function(){return u("option",this.$select).filter(":selected")},getOptionByValue:function(t){for(var e=u("option",this.$select),i=t.toString(),s=0;s<e.length;s+=1){var o=e[s];if(o.value===i)return u(o)}},getInputByValue:function(t){for(var e=u(".multiselect-option input:not(.multiselect-search)",this.$popupContainer),i=t.toString(),s=0;s<e.length;s+=1){var o=e[s];if(o.value===i)return u(o)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(t,e,i){var s=Array.prototype.slice.call(arguments,3);return setTimeout(function(){t.apply(i||window,s)},e)},setAllSelectedText:function(t){this.options.allSelectedText=t,this.updateButtonText()},isFirefox:function(){return!(!navigator||!navigator.userAgent)&&-1<navigator.userAgent.toLocaleLowerCase().indexOf("firefox")}},u.fn.multiselect=function(e,i,s){return this.each(function(){var t=u(this).data("multiselect");t||(t=new o(this,"object"==typeof e&&e),u(this).data("multiselect",t)),"string"==typeof e&&(t[e](i,s),"destroy"===e)&&u(this).data("multiselect",!1)})},u.fn.multiselect.Constructor=o,u(function(){u("select[data-role=multiselect]").multiselect()})});